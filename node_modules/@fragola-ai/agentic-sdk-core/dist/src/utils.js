import{SKIP_EVENT as s}from"./event";function c(t){return t.constructor.name==="AsyncFunction"}const r=(t,e={})=>{const o=structuredClone(e);if(t.choices[0].delta?.role?o.role=t.choices[0].delta.role:e.role||(o.role="assistant"),t.choices[0].delta?.content?o.content=(e.content||"")+t.choices[0].delta.content:e.content||(o.content=""),t.choices[0].delta?.tool_calls&&o.role==="assistant"){o.tool_calls||(o.tool_calls=[]);const n=t.choices[0].delta.tool_calls.at(-1);if(n)if(n.id)o.tool_calls.push({id:n.id,type:"function",function:{name:n.function?.name||"",arguments:n.function?.arguments||""}});else{const a=o.tool_calls.at(-1);a&&a.function&&n.function?.arguments&&(a.function={...a.function,arguments:a.function.arguments+n.function.arguments})}}return o},i=t=>typeof t=="object"&&t[s]==!0,u=async(t,e)=>i(t)?await e():t;export{c as isAsyncFunction,i as isSkipEvent,u as skipEventFallback,r as streamChunkToMessage};
//# sourceMappingURL=utils.js.map
